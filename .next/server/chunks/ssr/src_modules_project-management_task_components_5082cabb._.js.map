{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/Testing/frontend/Testing_Bluprint_Frontend/src/modules/project-management/task/components/CreateTaskModal.jsx"],"sourcesContent":["\n\n\n\n\"use client\";\n\nimport { useState, useEffect, useMemo, useCallback, useRef } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { createTask } from \"@/modules/project-management/task/slices/taskSlice\";\nimport { fetchTeamByProjectId } from \"@/modules/project-management/team/slices/teamSlice\";\nimport { Plus, User, Flag, CalendarIcon, Info, X, Loader } from \"lucide-react\";\nimport { toast } from \"sonner\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Button } from \"@/components/ui/button\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { Calendar } from \"@/components/ui/calendar\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogClose } from \"@/components/ui/dialog\";\nimport { Command, CommandEmpty, CommandGroup, CommandInput, CommandItem } from \"@/components/ui/command\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { format } from \"date-fns\";\nimport { cn } from \"@/lib/utils\";\nimport { useCurrentUser } from \"@/hooks/useCurrentUser\";\n\nconst priorityConfig = {\n  Low: { color: \"bg-emerald-100 text-emerald-800\", badge: \"Low\" },\n  Medium: { color: \"bg-amber-100 text-amber-800\", badge: \"Medium\" },\n  High: { color: \"bg-rose-100 text-rose-800\", badge: \"High\" },\n};\n\nconst getInitials = (name = \"\") =>\n  name.trim().split(\" \").filter(Boolean).map((n) => n[0]).join(\"\").toUpperCase().slice(0, 2);\n\nconst CreateTaskModal = ({ onTaskAssingn, projectId, project, onClose, isOpen }) => {\n  const dispatch = useDispatch();\n  const { currentUser } = useCurrentUser();\n  const { teamsByProject: teams, status: teamStatus } = useSelector((state) => state.team);\n  const { status: taskStatus, error: taskError } = useSelector((state) => state.task);\n\n  const prevOpenRef = useRef(isOpen);\n\n  const [formData, setFormData] = useState({\n    title: \"\",\n    description: \"\",\n    priority: \"Medium\",\n    projectId: projectId || \"\",\n    projectName: project?.data?.name || \"\",\n    teamId: \"\",\n    assignedTo: [],\n    assignedBy: \"\",\n  });\n\n  const [selectedAssignees, setSelectedAssignees] = useState([]);\n  const [errors, setErrors] = useState({});\n  const [selectedTeam, setSelectedTeam] = useState(null);\n  const [selectedDateTime, setSelectedDateTime] = useState(null);\n  const [memberSearchQuery, setMemberSearchQuery] = useState(\"\");\n  const [memberOpen, setMemberOpen] = useState(false);\n  const [isInitialized, setIsInitialized] = useState(false);\n\n  // Reset form when modal truly opens\n  useEffect(() => {\n    const justOpened = isOpen && !prevOpenRef.current;\n    if (justOpened) {\n      setFormData({\n        title: \"\",\n        description: \"\",\n        priority: \"Medium\",\n        projectId: projectId || \"\",\n        projectName: project?.data?.name || \"\",\n        teamId: \"\",\n        assignedTo: [],\n        assignedBy: \"\",\n      });\n      setSelectedAssignees([]);\n      setErrors({});\n      setSelectedTeam(null);\n      setSelectedDateTime(null);\n      setMemberSearchQuery(\"\");\n      setMemberOpen(false);\n    }\n    prevOpenRef.current = isOpen;\n  }, [isOpen, projectId, project?.data?.name]);\n\n  useEffect(() => {\n    if (projectId && !isInitialized && isOpen) {\n      dispatch(fetchTeamByProjectId(projectId));\n      setIsInitialized(true);\n    }\n  }, [dispatch, projectId, isInitialized, isOpen]);\n\n  const handleTeamSelect = useCallback((value) => {\n    const team = teams.find(t => t.teamId === value);\n    setSelectedTeam(team);\n    setFormData(prev => ({\n      ...prev,\n      teamId: value,\n      assignedBy: team?.teamLeadName || \"Unknown\",\n      assignedTo: [],\n    }));\n    setSelectedAssignees([]);\n  }, [teams]);\n\n  const availableMembers = useMemo(() => {\n    if (!selectedTeam?.teamMembers) return [];\n    const q = memberSearchQuery.toLowerCase();\n    return selectedTeam.teamMembers\n      .filter(m => \n        m.memberName.toLowerCase().includes(q) &&\n        !selectedAssignees.some(a => a.memberId === m.memberId)\n      )\n      .map(m => ({\n        memberId: m.memberId,\n        memberName: m.memberName,\n        role: m.role || \"Member\",\n      }));\n  }, [selectedTeam, memberSearchQuery, selectedAssignees]);\n\n  const toggleAssignee = useCallback((member) => {\n    setSelectedAssignees(prev => {\n      const exists = prev.some(a => a.memberId === member.memberId);\n      const newList = exists\n        ? prev.filter(a => a.memberId !== member.memberId)\n        : [...prev, member];\n\n      setFormData(f => ({ ...f, assignedTo: newList }));\n      return newList;\n    });\n  }, []);\n\n  const validate = useCallback(() => {\n    const newErrors = {};\n    if (!formData.title.trim()) newErrors.title = \"Title is required\";\n    if (!formData.priority) newErrors.priority = \"Priority is required\";\n    if (!selectedDateTime) newErrors.deadline = \"Deadline is required\";\n    if (!formData.description.trim()) newErrors.description = \"Description is required\";\n    if (!selectedTeam) newErrors.team = \"Team selection is required\";\n    if (selectedAssignees.length === 0) newErrors.assignedTo = \"Assign at least one member\";\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  }, [formData, selectedDateTime, selectedTeam, selectedAssignees]);\n\n  const handleSubmit = useCallback(async (e) => {\n    e.preventDefault();\n    if (!validate()) {\n      toast.error(\"Please fill all required fields\");\n      return;\n    }\n\n    const deadlineISO = selectedDateTime ? selectedDateTime.toISOString() : null;\n\n    const payload = {\n      ...formData,\n      projectId: selectedTeam?.projectId || projectId,\n      projectName: selectedTeam?.projectName || project?.data?.name || \"N/A\",\n      teamId: selectedTeam?.teamId,\n      deadline: deadlineISO,\n      assignedTo: formData.assignedTo,\n      assignedBy: formData.assignedBy,\n      // ← ONLY ADDED THIS (exact same format as subtask)\n      actionedBy: {\n        note: \"Task Created !\",\n        performedBy: currentUser?.name || currentUser?.email || \"Unknown User\",\n        timestamp: new Date().toISOString(),\n      },\n    };\n\n    try {\n      await dispatch(createTask(payload)).unwrap();\n      onTaskAssingn?.();\n      toast.success(\"Task assigned successfully!\");\n      onClose();\n    } catch (err) {\n      toast.error(taskError || \"Failed to assign task\");\n    }\n  }, [validate, formData, selectedDateTime, selectedTeam, dispatch, projectId, project, taskError, onTaskAssingn, onClose, currentUser]);\n\n  const displayDateTime = selectedDateTime\n    ? format(selectedDateTime, \"MMM dd, yyyy 'at' HH:mm\")\n    : \"Select date & time\";\n\n  const isSaveEnabled =\n    formData.title.trim() &&\n    formData.description.trim() &&\n    selectedDateTime &&\n    selectedTeam &&\n    selectedAssignees.length > 0;\n\n  if (!isOpen) return null;\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"w-full max-w-full h-[100vh] max-h-[100vh] sm:max-w-6xl sm:max-h-[85vh] bg-white shadow-lg border border-gray-200 rounded-lg text-black p-2\">\n        <DialogHeader className=\"bg-gradient-to-r from-blue-50 to-indigo-50 px-4 py-2 border-b border-gray-200 sticky top-0 z-10\">\n          <div className=\"flex justify-between items-center\">\n            <DialogTitle className=\"text-base sm:text-lg font-bold text-gray-800 flex items-center\">\n              <Plus className=\"mr-2 h-4 w-4 text-blue-500\" />\n              Assign New Task\n            </DialogTitle>\n            <DialogClose asChild>\n              <Button variant=\"ghost\" size=\"icon\" className=\"text-gray-500 hover:bg-gray-100 rounded-full h-7 w-7\">\n                <X className=\"h-3 w-3\" />\n              </Button>\n            </DialogClose>\n          </div>\n        </DialogHeader>\n\n        <div className=\"p-4 sm:p-6 overflow-y-auto max-h-[calc(85vh-60px)]\">\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n\n            {/* Title */}\n            <div className=\"w-full\">\n              <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\n                <Plus className=\"h-4 w-4 text-blue-500 mr-2\" />Title <span className=\"text-red-500 ml-1\">*</span>\n              </label>\n           \n                 <Textarea\n                value={formData.title}\n                onChange={(e) =>\n                  setFormData((prev) => ({\n                    ...prev,\n                    title: e.target.value.slice(0, 150),\n                  }))\n                }\n                className=\"w-full bg-white border border-gray-300 rounded-lg text-sm resize-none focus:ring-2 focus:ring-blue-200 focus:border-blue-500 p-3\"\n                placeholder=\"Enter subtask title...\"\n              />\n              <p className=\"text-xs text-muted-foreground mt-1\">\n                {formData.title.length} / 150 characters\n              </p>\n              {errors.title && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><X className=\"h-3 w-3 mr-1\" /> {errors.title}</p>}\n            </div>\n\n            {/* Priority & Deadline */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\n                  <Flag className=\"h-4 w-4 text-blue-500 mr-2\" /> Priority\n                </label>\n                <Select value={formData.priority} onValueChange={(v) => setFormData({ ...formData, priority: v })}>\n                  <SelectTrigger className=\"w-full h-10\">\n                    <SelectValue>\n                      <span className={cn(\"px-2 py-1 rounded-full text-xs font-medium\", priorityConfig[formData.priority]?.color)}>\n                        {priorityConfig[formData.priority]?.badge}\n                      </span>\n                    </SelectValue>\n                  </SelectTrigger>\n                  <SelectContent>\n                    {Object.entries(priorityConfig).map(([key, config]) => (\n                      <SelectItem key={key} value={key}>\n                        <span className={cn(\"px-2 py-1 rounded-full text-xs font-medium\", config.color)}>\n                          {config.badge}\n                        </span>\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div>\n                <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\n                  <CalendarIcon className=\"h-4 w-4 text-blue-500 mr-2\" /> Deadline <span className=\"text-red-500 ml-1\">*</span>\n                </label>\n                <Popover>\n                  <PopoverTrigger asChild>\n                    <Button variant=\"outline\" className={cn(\"w-full justify-between h-10 text-sm\", !selectedDateTime && \"text-gray-500\")}>\n                      {displayDateTime}\n                    </Button>\n                  </PopoverTrigger>\n                  <PopoverContent className=\"w-auto p-0 bg-white border border-gray-200 rounded-lg shadow-lg\">\n                    <Calendar mode=\"single\" selected={selectedDateTime} onSelect={setSelectedDateTime} initialFocus className=\"rounded-lg\" />\n                    <div className=\"p-3 border-t flex items-center gap-2\">\n                      <input\n                        type=\"time\"\n                        value={selectedDateTime ? format(selectedDateTime, \"HH:mm\") : \"\"}\n                        onChange={(e) => {\n                          if (selectedDateTime) {\n                            const [h, m] = e.target.value.split(\":\");\n                            const newDt = new Date(selectedDateTime);\n                            newDt.setHours(parseInt(h), parseInt(m));\n                            setSelectedDateTime(newDt);\n                          }\n                        }}\n                        className=\"h-10 border rounded px-3 text-sm w-full\"\n                      />\n                    </div>\n                  </PopoverContent>\n                </Popover>\n                {errors.deadline && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><X className=\"h-3 w-3 mr-1\" /> {errors.deadline}</p>}\n              </div>\n            </div>\n\n            {/* Team */}\n            <div>\n              <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\n                <User className=\"h-4 w-4 text-blue-500 mr-2\" /> Team <span className=\"text-red-500 ml-1\">*</span>\n              </label>\n              <Select value={selectedTeam?.teamId || \"\"} onValueChange={handleTeamSelect}>\n                <SelectTrigger className=\"w-full h-10\">\n                  <SelectValue placeholder={teamStatus === \"loading\" ? \"Loading teams...\" : \"Select team\"} />\n                </SelectTrigger>\n                <SelectContent>\n                  {teams.map((team) => (\n                    <SelectItem key={team.teamId} value={team.teamId}>{team.teamName}</SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n              {errors.team && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><X className=\"h-3 w-3 mr-1\" /> {errors.team}</p>}\n            </div>\n\n            {/* Assign To */}\n            <div>\n              <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\n                <User className=\"h-4 w-4 text-blue-500 mr-2\" /> Assign To <span className=\"text-red-500 ml-1\">*</span>\n              </label>\n              <div className=\"flex flex-wrap gap-3 items-center\">\n                \n                <Popover open={memberOpen} onOpenChange={setMemberOpen}>\n                  <PopoverTrigger asChild>\n                    <Button variant=\"outline\" disabled={!selectedTeam} className=\"h-12 w-full justify-between text-sm\">\n                      {selectedAssignees.length === 0 ? \"Select team members...\" : `${selectedAssignees.length} selected`}\n                      <User className=\"h-4 w-4 text-gray-500 ml-auto\" />\n                    </Button>\n                  </PopoverTrigger>\n                  <PopoverContent className=\"w-full p-0\" align=\"start\">\n                    <Command>\n                      <CommandInput placeholder=\"Search members...\" value={memberSearchQuery} onValueChange={setMemberSearchQuery} />\n                      <CommandEmpty>No members found</CommandEmpty>\n                      <CommandGroup className=\"max-h-64 overflow-auto\">\n                        {availableMembers.map((m) => (\n                          <CommandItem key={m.memberId} onSelect={() => toggleAssignee(m)}>\n                            <Avatar className=\"h-8 w-8 mr-3\">\n                              <AvatarFallback className=\"text-xs bg-teal-600 text-white\">\n                                {getInitials(m.memberName)}\n                              </AvatarFallback>\n                            </Avatar>\n                            <div>\n                              <div className=\"font-medium\">{m.memberName}</div>\n                              <div className=\"text-xs text-gray-500\">{m.role}</div>\n                            </div>\n                          </CommandItem>\n                        ))}\n                      </CommandGroup>\n                    </Command>\n                  </PopoverContent>\n                </Popover>\n                {selectedAssignees.map((person) => (\n                  <div key={person.memberId} className=\"relative group\">\n                    <Avatar className=\"h-10 w-10 ring-4 ring-white border-2 border-white cursor-pointer hover:z-10 transition-all hover:scale-110\">\n                      <AvatarFallback className=\"bg-teal-600 text-white text-sm font-bold\">\n                        {getInitials(person.memberName)}\n                      </AvatarFallback>\n                    </Avatar>\n                    <button\n                      type=\"button\"\n                      onClick={() => toggleAssignee(person)}\n                      className=\"absolute -top-1 -right-1 bg-red-600 text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition\"\n                    >\n                      <X className=\"h-3 w-3\" />\n                    </button>\n                  </div>\n                ))}\n\n              </div>\n              {errors.assignedTo && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><X className=\"h-3 w-3 mr-1\" /> {errors.assignedTo}</p>}\n            </div>\n\n            {/* Description */}\n            <div className=\"w-full\">\n              <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\n                <Info className=\"h-4 w-4 text-blue-500 mr-2\" /> Description <span className=\"text-red-500 ml-1\">*</span>\n              </label>\n              <Textarea\n                value={formData.description}\n                onChange={(e) => setFormData({ ...formData, description: e.target.value })}\n                className=\"w-full h-40 sm:h-48 md:h-52 bg-white border border-gray-300 rounded-lg text-sm resize-vertical focus:ring-2 focus:ring-blue-200 focus:border-blue-500 p-3\"\n                placeholder=\"Enter detailed task description...\"\n              />\n              <p className=\"text-xs text-muted-foreground mt-1\">\n                {formData.description.length} characters\n              </p>\n              {errors.description && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><X className=\"h-3 w-3 mr-1\" /> {errors.description}</p>}\n            </div>\n\n            {taskError && (\n              <div className=\"bg-red-50 border border-red-200 rounded-lg p-3\">\n                <p className=\"text-red-600 text-sm flex items-center\">\n                  <X className=\"h-4 w-4 mr-2\" /> {taskError}\n                </p>\n              </div>\n            )}\n\n            <div className=\"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200 mt-6\">\n              <Button type=\"button\" variant=\"outline\" onClick={onClose}>\n                Cancel\n              </Button>\n              <Button\n                type=\"submit\"\n                disabled={!isSaveEnabled || taskStatus === \"loading\"}\n                className=\"bg-blue-600 hover:bg-blue-700 text-white\"\n              >\n                {taskStatus === \"loading\" ? (\n                  <>\n                    <Loader className=\"mr-2 h-4 w-4 animate-spin\" />\n                    Assigning Task...\n                  </>\n                ) : (\n                  \"Assign Task\"\n                )}\n              </Button>\n            </div>\n          </form>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default CreateTaskModal;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1066, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/Testing/frontend/Testing_Bluprint_Frontend/src/modules/project-management/task/components/EditTaskModal.jsx"],"sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// \"use client\";\n\n// import { useState, useEffect, useMemo, useCallback, useRef } from \"react\";\n// import { useDispatch, useSelector } from \"react-redux\";\n// import { updateTask, fetchTaskById } from \"@/modules/project-management/task/slices/taskSlice\";\n// import { fetchTeamByProjectId } from \"@/modules/project-management/team/slices/teamSlice\";\n// import { Edit, User, Flag, CalendarIcon, Info, X, Loader } from \"lucide-react\";\n// import { toast } from \"sonner\";\n// import { Textarea } from \"@/components/ui/textarea\";\n// import { Button } from \"@/components/ui/button\";\n// import { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\n// import { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\n// import { Calendar } from \"@/components/ui/calendar\";\n// import { Dialog, DialogContent, DialogHeader, DialogTitle, DialogClose } from \"@/components/ui/dialog\";\n// import { Command, CommandEmpty, CommandGroup, CommandInput, CommandItem } from \"@/components/ui/command\";\n// import { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\n// import { format } from \"date-fns\";\n// import { cn } from \"@/lib/utils\";\n// import { useCurrentUser } from \"@/hooks/useCurrentUser\";\n\n// const priorityConfig = {\n//   Low: { color: \"bg-emerald-100 text-emerald-800\", badge: \"Low\" },\n//   Medium: { color: \"bg-amber-100 text-amber-800\", badge: \"Medium\" },\n//   High: { color: \"bg-rose-100 text-rose-800\", badge: \"High\" },\n// };\n\n// const getInitials = (name = \"\") =>\n//   name.trim().split(\" \").filter(Boolean).map(n => n[0]).join(\"\").toUpperCase().slice(0, 2);\n\n// const EditTaskModal = ({ taskId, isOpen, onClose, onTaskUpdated }) => {\n//   const dispatch = useDispatch();\n//   const { currentUser } = useCurrentUser();\n//   const task = useSelector(state => state.task.currentTask);\n//   const { teamsByProject: teams } = useSelector(state => state.team);\n//   const { status: taskStatus, error: taskError } = useSelector(state => state.task);\n\n//   const prevOpenRef = useRef(isOpen);\n\n//   const [formData, setFormData] = useState({ title: \"\", description: \"\", priority: \"Medium\" });\n//   const [selectedAssignees, setSelectedAssignees] = useState([]);\n//   const [selectedTeam, setSelectedTeam] = useState(null);\n//   const [selectedDateTime, setSelectedDateTime] = useState(null);\n//   const [memberSearchQuery, setMemberSearchQuery] = useState(\"\");\n//   const [memberOpen, setMemberOpen] = useState(false);\n//   const [hasUserInteracted, setHasUserInteracted] = useState(false); // ← NEW: prevents errors on first load\n//   const [errors, setErrors] = useState({});\n\n//   // Fetch data when modal opens\n//   useEffect(() => {\n//     const justOpened = isOpen && !prevOpenRef.current;\n//     if (justOpened && taskId) {\n//       dispatch(fetchTaskById(taskId));\n//     }\n//     prevOpenRef.current = isOpen;\n//   }, [isOpen, taskId, dispatch]);\n\n//   // Pre-fill form when task + teams are loaded\n//   useEffect(() => {\n//     if (!task || !isOpen) return;\n\n//     const deadlineDate = task.deadline ? new Date(task.deadline) : null;\n\n//     setFormData({\n//       title: task.title || \"\",\n//       description: task.description || \"\",\n//       priority: task.priority || \"Medium\",\n//     });\n//     setSelectedDateTime(deadlineDate);\n\n//     // 1. Find and set team FIRST\n//     const currentTeam = teams.find(t => t.teamId === task.teamId);\n//     setSelectedTeam(currentTeam || null);\n\n//     // 2. Then set assignees\n//     const assignees = Array.isArray(task.assignedTo)\n//       ? task.assignedTo.map(a => ({\n//           memberId: a.memberId || a._id,\n//           memberName: a.memberName || a.name,\n//           role: a.role || \"Member\",\n//         }))\n//       : task.assignedToDetails\n//       ? [{\n//           memberId: task.assignedToDetails.memberId,\n//           memberName: task.assignedToDetails.memberName,\n//           role: task.assignedToDetails.role || \"Member\",\n//         }]\n//       : [];\n\n//     setSelectedAssignees(assignees);\n//     setMemberSearchQuery(\"\");\n//     setHasUserInteracted(false); // ← Reset interaction flag\n//     setErrors({}); // ← Clear errors on load\n//   }, [task, teams, isOpen]);\n\n//   // Fetch teams when projectId is known\n//   useEffect(() => {\n//     if (task?.projectId && isOpen) {\n//       dispatch(fetchTeamByProjectId(task.projectId));\n//     }\n//   }, [task?.projectId, isOpen, dispatch]);\n\n//   const handleTeamSelect = useCallback((value) => {\n//     const team = teams.find(t => t.teamId === value);\n//     setSelectedTeam(team);\n//     setSelectedAssignees([]); // clear assignees when team changes\n//     setHasUserInteracted(true);\n//   }, [teams]);\n\n//   const availableMembers = useMemo(() => {\n//     if (!selectedTeam?.teamMembers) return [];\n//     const q = memberSearchQuery.toLowerCase();\n//     return selectedTeam.teamMembers\n//       .filter(m =>\n//         m.memberName?.toLowerCase().includes(q) &&\n//         !selectedAssignees.some(a => a.memberId === m.memberId)\n//       )\n//       .map(m => ({\n//         memberId: m.memberId,\n//         memberName: m.memberName,\n//         role: m.role || \"Member\",\n//       }));\n//   }, [selectedTeam, memberSearchQuery, selectedAssignees]);\n\n//   const toggleAssignee = useCallback((member) => {\n//     setSelectedAssignees(prev => {\n//       const exists = prev.some(a => a.memberId === member.memberId);\n//       setHasUserInteracted(true);\n//       return exists\n//         ? prev.filter(a => a.memberId !== member.memberId)\n//         : [...prev, member];\n//     });\n//   }, []);\n\n//   const validate = useCallback(() => {\n//     // Only show errors after user has interacted\n//     if (!hasUserInteracted) return true;\n\n//     const newErrors = {};\n//     if (!formData.title.trim()) newErrors.title = \"Title is required\";\n//     if (!formData.description.trim()) newErrors.description = \"Description is required\";\n//     if (!selectedDateTime) newErrors.deadline = \"Deadline is required\";\n//     if (!selectedTeam) newErrors.team = \"Team selection is required\";\n//     if (selectedAssignees.length === 0) newErrors.assignedTo = \"Assign at least one member\";\n\n//     setErrors(newErrors);\n//     return Object.keys(newErrors).length === 0;\n//   }, [formData, selectedDateTime, selectedTeam, selectedAssignees, hasUserInteracted]);\n\n//   const handleSubmit = useCallback(async (e) => {\n//     e.preventDefault();\n//     setHasUserInteracted(true);\n//     if (!validate()) {\n//       toast.error(\"Please fill all required fields\");\n//       return;\n//     }\n\n//     const deadlineISO = selectedDateTime ? selectedDateTime.toISOString() : null;\n\n//     const payload = {\n//       task_id: taskId,\n//       title: formData.title.trim(),\n//       description: formData.description.trim(),\n//       priority: formData.priority,\n//       deadline: deadlineISO,\n//       teamId: selectedTeam.teamId,\n//       assignedTo: selectedAssignees.map(m => ({\n//         memberId: m.memberId,\n//         memberName: m.memberName,\n//         role: m.role,\n//       })),\n//       actionedBy: {\n//         note: \"Task Updated!\",\n//         performedBy: currentUser?.name || currentUser?.email || \"Unknown User\",\n//         timestamp: new Date().toISOString(),\n//       },\n//     };\n\n//     try {\n//       await dispatch(updateTask(payload)).unwrap();\n//       toast.success(\"Task updated successfully!\");\n//       onTaskUpdated?.();\n//       onClose();\n//     } catch (err) {\n//       toast.error(taskError || \"Failed to update task\");\n//     }\n//   }, [validate, formData, selectedDateTime, selectedTeam, selectedAssignees, taskId, currentUser, dispatch, taskError, onTaskUpdated, onClose]);\n\n//   const displayDateTime = selectedDateTime\n//     ? format(selectedDateTime, \"MMM dd, yyyy 'at' HH:mm\")\n//     : \"Select date & time\";\n\n//   const isSaveEnabled = formData.title.trim() && formData.description.trim() && selectedDateTime && selectedTeam && selectedAssignees.length > 0;\n\n//   if (!isOpen) return null;\n\n//   return (\n//     <Dialog open={isOpen} onOpenChange={onClose}>\n//       <DialogContent className=\"w-full max-w-full h-[100vh] max-h-[100vh] sm:max-w-6xl sm:max-h-[85vh] bg-white shadow-lg border border-gray-200 rounded-lg text-black p-2\">\n//         <DialogHeader className=\"bg-gradient-to-r from-blue-50 to-indigo-50 px-4 py-2 border-b border-gray-200 sticky top-0 z-10\">\n//           <div className=\"flex justify-between items-center\">\n//             <DialogTitle className=\"text-base sm:text-lg font-bold text-gray-800 flex items-center\">\n//               <Edit className=\"mr-2 h-4 w-4 text-blue-500\" />\n//               Edit Task\n//             </DialogTitle>\n//             <DialogClose asChild>\n//               <Button variant=\"ghost\" size=\"icon\" className=\"text-gray-500 hover:bg-gray-100 rounded-full h-7 w-7\">\n//                 <X className=\"h-3 w-3\" />\n//               </Button>\n//             </DialogClose>\n//           </div>\n//         </DialogHeader>\n\n//         <div className=\"p-4 sm:p-6 overflow-y-auto max-h-[calc(85vh-60px)]\">\n//           <form onSubmit={handleSubmit} className=\"space-y-4\">\n\n//             {/* Title */}\n//             <div className=\"w-full\">\n//               <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\n//                 <Edit className=\"h-4 w-4 text-blue-500 mr-2\" />Title <span className=\"text-red-500 ml-1\">*</span>\n//               </label>\n              \n//                <Textarea\n//                               value={formData.title}\n//                               onChange={(e) =>\n//                                 setFormData((prev) => ({\n//                                   ...prev,\n//                                   title: e.target.value.slice(0, 150),\n//                                 }))\n//                               }\n//                               className=\"w-full bg-white border border-gray-300 rounded-lg text-sm resize-none focus:ring-2 focus:ring-blue-200 focus:border-blue-500 p-3\"\n//                               placeholder=\"Enter subtask title...\"\n//                             />\n//                 <p className=\"text-xs text-muted-foreground mt-1\">\n//                 {formData.title.length} / 150 characters\n//               </p>\n//               {errors.title && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><X className=\"h-3 w-3 mr-1\" /> {errors.title}</p>}\n//             </div>\n\n//             {/* Priority & Deadline */}\n//             <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n//               <div>\n//                 <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\n//                   <Flag className=\"h-4 w-4 text-blue-500 mr-2\" /> Priority\n//                 </label>\n//                 <Select value={formData.priority} onValueChange={(v) => { setFormData(prev => ({ ...prev, priority: v })); setHasUserInteracted(true); }}>\n//                   <SelectTrigger className=\"w-full h-10\">\n//                     <SelectValue>\n//                       <span className={cn(\"px-2 py-1 rounded-full text-xs font-medium\", priorityConfig[formData.priority]?.color)}>\n//                         {priorityConfig[formData.priority]?.badge}\n//                       </span>\n//                     </SelectValue>\n//                   </SelectTrigger>\n//                   <SelectContent>\n//                     {Object.entries(priorityConfig).map(([key, config]) => (\n//                       <SelectItem key={key} value={key}>\n//                         <span className={cn(\"px-2 py-1 rounded-full text-xs font-medium\", config.color)}>\n//                           {config.badge}\n//                         </span>\n//                       </SelectItem>\n//                     ))}\n//                   </SelectContent>\n//                 </Select>\n//               </div>\n\n//               <div>\n//                 <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\n//                   <CalendarIcon className=\"h-4 w-4 text-blue-500 mr-2\" /> Deadline <span className=\"text-red-500 ml-1\">*</span>\n//                 </label>\n//                 <Popover>\n//                   <PopoverTrigger asChild>\n//                     <Button variant=\"outline\" className={cn(\"w-full justify-between h-10 text-sm\", !selectedDateTime && \"text-gray-500\")}>\n//                       {displayDateTime}\n//                     </Button>\n//                   </PopoverTrigger>\n//                   <PopoverContent className=\"w-auto p-0 bg-white border border-gray-200 rounded-lg shadow-lg\">\n//                     <Calendar mode=\"single\" selected={selectedDateTime} onSelect={(date) => { setSelectedDateTime(date); setHasUserInteracted(true); }} initialFocus className=\"rounded-lg\" />\n//                     <div className=\"p-3 border-t flex items-center gap-2\">\n//                       <input\n//                         type=\"time\"\n//                         value={selectedDateTime ? format(selectedDateTime, \"HH:mm\") : \"\"}\n//                         onChange={(e) => {\n//                           if (selectedDateTime) {\n//                             const [h, m] = e.target.value.split(\":\");\n//                             const newDt = new Date(selectedDateTime);\n//                             newDt.setHours(parseInt(h), parseInt(m));\n//                             setSelectedDateTime(newDt);\n//                             setHasUserInteracted(true);\n//                           }\n//                         }}\n//                         className=\"h-10 border rounded px-3 text-sm w-full\"\n//                       />\n//                     </div>\n//                   </PopoverContent>\n//                 </Popover>\n//                 {errors.deadline && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><X className=\"h-3 w-3 mr-1\" /> {errors.deadline}</p>}\n//               </div>\n//             </div>\n\n//             {/* Team */}\n//             <div>\n//               <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\n//                 <User className=\"h-4 w-4 text-blue-500 mr-2\" /> Team <span className=\"text-red-500 ml-1\">*</span>\n//               </label>\n//               <Select value={selectedTeam?.teamId || \"\"} onValueChange={handleTeamSelect}>\n//                 <SelectTrigger className=\"w-full h-10\">\n//                   <SelectValue placeholder=\"Select team\" />\n//                 </SelectTrigger>\n//                 <SelectContent>\n//                   {teams.map((team) => (\n//                     <SelectItem key={team.teamId} value={team.teamId}>{team.teamName}</SelectItem>\n//                   ))}\n//                 </SelectContent>\n//               </Select>\n//               {errors.team && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><X className=\"h-3 w-3 mr-1\" /> {errors.team}</p>}\n//             </div>\n\n//             {/* Assign To */}\n//             <div>\n//               <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\n//                 <User className=\"h-4 w-4 text-blue-500 mr-2\" /> Assign To <span className=\"text-red-500 ml-1\">*</span>\n//               </label>\n//               <div className=\"flex flex-wrap gap-3 items-center\">\n//                 {selectedAssignees.map((person) => (\n//                   <div key={person.memberId} className=\"relative group\">\n//                     <Avatar className=\"h-10 w-10 ring-4 ring-white border-2 border-white cursor-pointer hover:scale-110 transition\">\n//                       <AvatarFallback className=\"bg-teal-600 text-white text-sm font-bold\">\n//                         {getInitials(person.memberName)}\n//                       </AvatarFallback>\n//                     </Avatar>\n//                     <button\n//                       type=\"button\"\n//                       onClick={() => toggleAssignee(person)}\n//                       className=\"absolute -top-1 -right-1 bg-red-600 text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition\"\n//                     >\n//                       <X className=\"h-3 w-3\" />\n//                     </button>\n//                   </div>\n//                 ))}\n\n//                 <Popover open={memberOpen} onOpenChange={setMemberOpen}>\n//                   <PopoverTrigger asChild>\n//                     <Button variant=\"outline\" disabled={!selectedTeam} className=\"h-12 w-full justify-between text-sm\">\n//                       {selectedAssignees.length === 0 ? \"Select team members...\" : `${selectedAssignees.length} selected`}\n//                       <User className=\"h-4 w-4 text-gray-500 ml-auto\" />\n//                     </Button>\n//                   </PopoverTrigger>\n//                   <PopoverContent className=\"w-full p-0\" align=\"start\">\n//                     <Command>\n//                       <CommandInput placeholder=\"Search members...\" value={memberSearchQuery} onValueChange={setMemberSearchQuery} />\n//                       <CommandEmpty>No members found</CommandEmpty>\n//                       <CommandGroup className=\"max-h-64 overflow-auto\">\n//                         {availableMembers.map((m) => (\n//                           <CommandItem key={m.memberId} onSelect={() => toggleAssignee(m)}>\n//                             <Avatar className=\"h-8 w-8 mr-3\">\n//                               <AvatarFallback className=\"text-xs bg-teal-600 text-white\">\n//                                 {getInitials(m.memberName)}\n//                               </AvatarFallback>\n//                             </Avatar>\n//                             <div>\n//                               <div className=\"font-medium\">{m.memberName}</div>\n//                               <div className=\"text-xs text-gray-500\">{m.role}</div>\n//                             </div>\n//                           </CommandItem>\n//                         ))}\n//                       </CommandGroup>\n//                     </Command>\n//                   </PopoverContent>\n//                 </Popover>\n//               </div>\n//               {errors.assignedTo && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><X className=\"h-3 w-3 mr-1\" /> {errors.assignedTo}</p>}\n//             </div>\n\n//             {/* Description */}\n//             <div className=\"w-full\">\n//               <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\n//                 <Info className=\"h-4 w-4 text-blue-500 mr-2\" /> Description <span className=\"text-red-500 ml-1\">*</span>\n//               </label>\n//               <Textarea\n//                 value={formData.description}\n//                 onChange={(e) => { setFormData(prev => ({ ...prev, description: e.target.value })); setHasUserInteracted(true); }}\n//                 className=\"w-full h-40 sm:h-48 md:h-52 bg-white border border-gray-300 rounded-lg text-sm resize-vertical focus:ring-2 focus:ring-blue-200 focus:border-blue-500 p-3\"\n//                 placeholder=\"Enter detailed task description...\"\n//               />\n//                <p className=\"text-xs text-muted-foreground mt-1\">\n//                 {formData.description.length} characters\n//               </p>\n//               {errors.description && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><X className=\"h-3 w-3 mr-1\" /> {errors.description}</p>}\n//             </div>\n\n//             {taskError && (\n//               <div className=\"bg-red-50 border border-red-200 rounded-lg p-3\">\n//                 <p className=\"text-red-600 text-sm flex items-center\">\n//                   <X className=\"h-4 w-4 mr-2\" /> {taskError}\n//                 </p>\n//               </div>\n//             )}\n\n//             <div className=\"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200 mt-6\">\n//               <Button type=\"button\" variant=\"outline\" onClick={onClose}>\n//                 Cancel\n//               </Button>\n//               <Button\n//                 type=\"submit\"\n//                 disabled={!isSaveEnabled || taskStatus === \"loading\"}\n//                 className=\"bg-blue-600 hover:bg-blue-700 text-white\"\n//               >\n//                 {taskStatus === \"loading\" ? (\n//                   <>\n//                     <Loader className=\"mr-2 h-4 w-4 animate-spin\" />\n//                     Updating Task...\n//                   </>\n//                 ) : (\n//                   \"Update Task\"\n//                 )}\n//               </Button>\n//             </div>\n//           </form>\n//         </div>\n//       </DialogContent>\n//     </Dialog>\n//   );\n// };\n\n// export default EditTaskModal;\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// \"use client\";\n// import { useState, useEffect, useMemo, useCallback, useRef } from \"react\";\n// import { useDispatch, useSelector } from \"react-redux\";\n// import { updateTask, fetchTaskById } from \"@/modules/project-management/task/slices/taskSlice\";\n// import { fetchTeamByProjectId } from \"@/modules/project-management/team/slices/teamSlice\";\n// import { Edit, User, Flag, CalendarIcon, Info, X, Loader } from \"lucide-react\";\n// import { toast } from \"sonner\";\n// import { Textarea } from \"@/components/ui/textarea\";\n// import { Button } from \"@/components/ui/button\";\n// import {\n//   Select,\n//   SelectContent,\n//   SelectItem,\n//   SelectTrigger,\n//   SelectValue,\n// } from \"@/components/ui/select\";\n// import { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\n// import { Calendar } from \"@/components/ui/calendar\";\n// import {\n//   Dialog,\n//   DialogContent,\n//   DialogHeader,\n//   DialogTitle,\n//   DialogClose,\n// } from \"@/components/ui/dialog\";\n// import {\n//   Command,\n//   CommandEmpty,\n//   CommandGroup,\n//   CommandInput,\n//   CommandItem,\n// } from \"@/components/ui/command\";\n// import { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\n// import { format } from \"date-fns\";\n// import { cn } from \"@/lib/utils\";\n// import { useCurrentUser } from \"@/hooks/useCurrentUser\";\n\n// const priorityConfig = {\n//   Low: { color: \"bg-emerald-100 text-emerald-800\", badge: \"Low\" },\n//   Medium: { color: \"bg-amber-100 text-amber-800\", badge: \"Medium\" },\n//   High: { color: \"bg-rose-100 text-rose-800\", badge: \"High\" },\n// };\n\n// const getInitials = (name = \"\") =>\n//   name.trim().split(\" \").filter(Boolean).map(n => n[0]).join(\"\").toUpperCase().slice(0, 2);\n\n// const EditTaskModal = ({ taskId, isOpen, onClose, onTaskUpdated }) => {\n//   const dispatch = useDispatch();\n//   const { currentUser } = useCurrentUser();\n//   const task = useSelector(state => state.task.currentTask);\n//   const { teamsByProject: teams } = useSelector(state => state.team);\n//   const { status: taskStatus, error: taskError } = useSelector(state => state.task);\n\n//   const prevOpenRef = useRef(isOpen);\n\n//   const [formData, setFormData] = useState({ title: \"\", description: \"\", priority: \"Medium\" });\n//   const [selectedAssignees, setSelectedAssignees] = useState([]);\n//   const [selectedTeam, setSelectedTeam] = useState(null);\n//   const [selectedDateTime, setSelectedDateTime] = useState(null);\n//   const [memberSearchQuery, setMemberSearchQuery] = useState(\"\");\n//   const [memberOpen, setMemberOpen] = useState(false);\n//   const [hasUserInteracted, setHasUserInteracted] = useState(false);\n//   const [errors, setErrors] = useState({});\n\n//   // Fetch task when modal opens\n//   useEffect(() => {\n//     const justOpened = isOpen && !prevOpenRef.current;\n//     if (justOpened && taskId) {\n//       dispatch(fetchTaskById(taskId));\n//     }\n//     prevOpenRef.current = isOpen;\n//   }, [isOpen, taskId, dispatch]);\n\n//   // Pre-fill form when task and teams are available\n//   useEffect(() => {\n//     if (!task || !isOpen) {\n//       setSelectedTeam(null);\n//       setSelectedAssignees([]);\n//       setSelectedDateTime(null);\n//       setFormData({ title: \"\", description: \"\", priority: \"Medium\" });\n//       return;\n//     }\n\n//     const deadlineDate = task.deadline ? new Date(task.deadline) : null;\n//     setFormData({\n//       title: task.title || \"\",\n//       description: task.description || \"\",\n//       priority: task.priority || \"Medium\",\n//     });\n//     setSelectedDateTime(deadlineDate);\n\n//     // Find and set current team (runs again when teams load)\n//     if (teams.length > 0) {\n//       const currentTeam = teams.find(t => t.teamId === task.teamId);\n     \n//       setSelectedTeam(currentTeam || null);\n//     } else {\n//       setSelectedTeam(null);\n//     }\n\n//     // Set assignees\n//     const assignees = Array.isArray(task.assignedTo)\n//       ? task.assignedTo.map(a => ({\n//           memberId: a.memberId || a._id,\n//           memberName: a.memberName || a.name || \"Unknown\",\n//           role: a.role || \"Member\",\n//         }))\n//       : task.assignedToDetails\n//       ? [{\n//           memberId: task.assignedToDetails.memberId,\n//           memberName: task.assignedToDetails.memberName || \"Unknown\",\n//           role: task.assignedToDetails.role || \"Member\",\n//         }]\n//       : [];\n\n//     setSelectedAssignees(assignees);\n//     setMemberSearchQuery(\"\");\n//     setHasUserInteracted(false);\n//     setErrors({});\n//   }, [task, teams, isOpen]);\n\n//   // Fetch teams when projectId is known\n//   useEffect(() => {\n//     if (task?.projectId && isOpen) {\n//       dispatch(fetchTeamByProjectId(task.projectId));\n//     }\n//   }, [task?.projectId, isOpen, dispatch]);\n\n//   const handleTeamSelect = useCallback((value) => {\n  \n//     console.log(\"gc\",value);\n    \n//     const team = teams.find(t => t.teamId === value);\n//     setSelectedTeam(team || null);\n//     setSelectedAssignees([]); // Clear assignees when team changes\n//     setHasUserInteracted(true);\n//   }, [teams]);\n\n//   const availableMembers = useMemo(() => {\n//     if (!selectedTeam?.teamMembers) return [];\n//     const q = memberSearchQuery.toLowerCase();\n//     return selectedTeam.teamMembers\n//       .filter(m =>\n//         m.memberName?.toLowerCase().includes(q) &&\n//         !selectedAssignees.some(a => a.memberId === m.memberId)\n//       )\n//       .map(m => ({\n//         memberId: m.memberId,\n//         memberName: m.memberName,\n//         role: m.role || \"Member\",\n//       }));\n//   }, [selectedTeam, memberSearchQuery, selectedAssignees]);\n\n//   const toggleAssignee = useCallback((member) => {\n//     setSelectedAssignees(prev => {\n//       const exists = prev.some(a => a.memberId === member.memberId);\n//       setHasUserInteracted(true);\n//       return exists\n//         ? prev.filter(a => a.memberId !== member.memberId)\n//         : [...prev, member];\n//     });\n//   }, []);\n\n//   const validate = useCallback(() => {\n//     if (!hasUserInteracted) return true;\n//     const newErrors = {};\n//     if (!formData.title.trim()) newErrors.title = \"Title is required\";\n//     if (!formData.description.trim()) newErrors.description = \"Description is required\";\n//     if (!selectedDateTime) newErrors.deadline = \"Deadline is required\";\n//     if (!selectedTeam) newErrors.team = \"Team selection is required\";\n//     if (selectedAssignees.length === 0) newErrors.assignedTo = \"Assign at least one member\";\n//     setErrors(newErrors);\n//     return Object.keys(newErrors).length === 0;\n//   }, [formData, selectedDateTime, selectedTeam, selectedAssignees, hasUserInteracted]);\n\n//   const handleSubmit = useCallback(async (e) => {\n//     e.preventDefault();\n//     setHasUserInteracted(true);\n//     if (!validate()) {\n//       toast.error(\"Please fill all required fields\");\n//       return;\n//     }\n\n//     const deadlineISO = selectedDateTime ? selectedDateTime.toISOString() : null;\n//     const payload = {\n//       task_id: taskId,\n//       title: formData.title.trim(),\n//       description: formData.description.trim(),\n//       priority: formData.priority,\n//       deadline: deadlineISO,\n//       teamId: selectedTeam.teamId,\n//       assignedTo: selectedAssignees.map(m => ({\n//         memberId: m.memberId,\n//         memberName: m.memberName,\n//         role: m.role,\n//       })),\n//       actionedBy: {\n//         note: \"Task Updated!\",\n//         performedBy: currentUser?.name || currentUser?.email || \"Unknown User\",\n//         timestamp: new Date().toISOString(),\n//       },\n//     };\n\n//     try {\n//       await dispatch(updateTask(payload)).unwrap();\n//       toast.success(\"Task updated successfully!\");\n//       onTaskUpdated?.();\n//       onClose();\n//     } catch (err) {\n//       toast.error(taskError || \"Failed to update task\");\n//     }\n//   }, [validate, formData, selectedDateTime, selectedTeam, selectedAssignees, taskId, currentUser, dispatch, taskError, onTaskUpdated, onClose]);\n\n//   const displayDateTime = selectedDateTime\n//     ? format(selectedDateTime, \"MMM dd, yyyy 'at' HH:mm\")\n//     : \"Select date & time\";\n\n//   const isSaveEnabled = formData.title.trim() && formData.description.trim() && selectedDateTime && selectedTeam && selectedAssignees.length > 0;\n\n//   if (!isOpen) return null;\n\n//   //\n\n//                       console.log(task?.assignedTeam?.teamId);\n                      \n                      \n                    \n\n//   return (\n//     <Dialog open={isOpen} onOpenChange={onClose}>\n//       <DialogContent className=\"w-full max-w-full h-[100vh] max-h-[100vh] sm:max-w-6xl sm:max-h-[85vh] bg-white shadow-lg border border-gray-200 rounded-lg text-black p-2\">\n//         <DialogHeader className=\"bg-gradient-to-r from-blue-50 to-indigo-50 px-4 py-2 border-b border-gray-200 sticky top-0 z-10\">\n//           <div className=\"flex justify-between items-center\">\n//             <DialogTitle className=\"text-base sm:text-lg font-bold text-gray-800 flex items-center\">\n//               <Edit className=\"mr-2 h-4 w-4 text-blue-500\" />\n//               Edit Task\n//             </DialogTitle>\n//             <DialogClose asChild>\n//               <Button variant=\"ghost\" size=\"icon\" className=\"text-gray-500 hover:bg-gray-100 rounded-full h-7 w-7\">\n//                 <X className=\"h-3 w-3\" />\n//               </Button>\n//             </DialogClose>\n//           </div>\n//         </DialogHeader>\n\n//         <div className=\"p-4 sm:p-6 overflow-y-auto max-h-[calc(85vh-60px)]\">\n//           <form onSubmit={handleSubmit} className=\"space-y-4\">\n//             {/* Title */}\n//             <div className=\"w-full\">\n//               <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\n//                 <Edit className=\"h-4 w-4 text-blue-500 mr-2\" /> Title <span className=\"text-red-500 ml-1\">*</span>\n//               </label>\n//               <Textarea\n//                 value={formData.title}\n//                 onChange={(e) =>\n//                   setFormData(prev => ({ ...prev, title: e.target.value.slice(0, 150) }))\n//                 }\n//                 className=\"w-full bg-white border border-gray-300 rounded-lg text-sm resize-none focus:ring-2 focus:ring-blue-200 focus:border-blue-500 p-3\"\n//                 placeholder=\"Enter task title...\"\n//               />\n//               <p className=\"text-xs text-muted-foreground mt-1\">{formData.title.length} / 150 characters</p>\n//               {errors.title && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><X className=\"h-3 w-3 mr-1\" /> {errors.title}</p>}\n//             </div>\n\n//             {/* Priority & Deadline */}\n//             <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n//               <div>\n//                 <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\n//                   <Flag className=\"h-4 w-4 text-blue-500 mr-2\" /> Priority\n//                 </label>\n//                 <Select value={formData.priority} onValueChange={(v) => { setFormData(prev => ({ ...prev, priority: v })); setHasUserInteracted(true); }}>\n//                   <SelectTrigger className=\"w-full h-10\">\n//                     <SelectValue>\n//                       <span className={cn(\"px-2 py-1 rounded-full text-xs font-medium\", priorityConfig[formData.priority]?.color)}>\n//                         {priorityConfig[formData.priority]?.badge}\n//                       </span>\n//                     </SelectValue>\n//                   </SelectTrigger>\n//                   <SelectContent>\n//                     {Object.entries(priorityConfig).map(([key, config]) => (\n//                       <SelectItem key={key} value={key}>\n//                         <span className={cn(\"px-2 py-1 rounded-full text-xs font-medium\", config.color)}>\n//                           {config.badge}\n//                         </span>\n//                       </SelectItem>\n//                     ))}\n//                   </SelectContent>\n//                 </Select>\n//               </div>\n\n//               <div>\n//                 <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\n//                   <CalendarIcon className=\"h-4 w-4 text-blue-500 mr-2\" /> Deadline <span className=\"text-red-500 ml-1\">*</span>\n//                 </label>\n//                 <Popover>\n//                   <PopoverTrigger asChild>\n//                     <Button variant=\"outline\" className={cn(\"w-full justify-between h-10 text-sm\", !selectedDateTime && \"text-gray-500\")}>\n//                       {displayDateTime}\n//                     </Button>\n//                   </PopoverTrigger>\n//                   <PopoverContent className=\"w-auto p-0 bg-white border border-gray-200 rounded-lg shadow-lg\">\n//                     <Calendar mode=\"single\" selected={selectedDateTime} onSelect={(date) => { setSelectedDateTime(date); setHasUserInteracted(true); }} initialFocus className=\"rounded-lg\" />\n//                     <div className=\"p-3 border-t flex items-center gap-2\">\n//                       <input\n//                         type=\"time\"\n//                         value={selectedDateTime ? format(selectedDateTime, \"HH:mm\") : \"\"}\n//                         onChange={(e) => {\n//                           if (selectedDateTime) {\n//                             const [h, m] = e.target.value.split(\":\");\n//                             const newDt = new Date(selectedDateTime);\n//                             newDt.setHours(parseInt(h), parseInt(m));\n//                             setSelectedDateTime(newDt);\n//                             setHasUserInteracted(true);\n//                           }\n//                         }}\n//                         className=\"h-10 border rounded px-3 text-sm w-full\"\n//                       />\n//                     </div>\n//                   </PopoverContent>\n//                 </Popover>\n//                 {errors.deadline && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><X className=\"h-3 w-3 mr-1\" /> {errors.deadline}</p>}\n//               </div>\n//             </div>\n\n//             {/* Team */}\n//             <div>\n//               <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\n//                 <User className=\"h-4 w-4 text-blue-500 mr-2\" /> Team <span className=\"text-red-500 ml-1\">*</span>\n//               </label>\n               \n//               <Select value=\"hrms-001\" onValueChange={handleTeamSelect}>\n//               {/* <Select value={selectedTeam?.teamId || \"\"} onValueChange={handleTeamSelect}> */}\n//                 <SelectTrigger className=\"w-full h-10\">\n//                   <SelectValue placeholder=\"Select a team\">\n//                     {selectedTeam ? selectedTeam.teamName : \"Select a team\"}\n                   \n//                   </SelectValue>\n//                 </SelectTrigger>\n//                 <SelectContent>\n//                   {teams.map((team) => (\n//                     <SelectItem key={team.teamId} value={team.teamId}>\n//                       {team.teamName}\n//                     </SelectItem>\n//                   ))}\n//                 </SelectContent>\n//               </Select>\n//               {errors.team && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><X className=\"h-3 w-3 mr-1\" /> {errors.team}</p>}\n//             </div>\n\n\n//             {/* Assign To */}\n//             <div>\n//               <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\n//                 <User className=\"h-4 w-4 text-blue-500 mr-2\" /> Assign To <span className=\"text-red-500 ml-1\">*</span>\n//               </label>\n//               <div className=\"flex flex-wrap gap-3 items-center mb-3\">\n//                 {selectedAssignees.map((person) => (\n//                   <div key={person.memberId} className=\"relative group\">\n//                     <Avatar className=\"h-10 w-10 ring-4 ring-white border-2 border-white cursor-pointer hover:scale-110 transition\">\n//                       <AvatarFallback className=\"bg-teal-600 text-white text-sm font-bold\">\n//                         {getInitials(person.memberName)}\n//                       </AvatarFallback>\n//                     </Avatar>\n//                     <button\n//                       type=\"button\"\n//                       onClick={() => toggleAssignee(person)}\n//                       className=\"absolute -top-1 -right-1 bg-red-600 text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition\"\n//                     >\n//                       <X className=\"h-3 w-3\" />\n//                     </button>\n//                   </div>\n//                 ))}\n//               </div>\n//               <Popover open={memberOpen} onOpenChange={setMemberOpen}>\n//                 <PopoverTrigger asChild>\n//                   <Button variant=\"outline\" disabled={!selectedTeam} className=\"w-full h-12 justify-between text-sm\">\n//                     {selectedAssignees.length === 0\n//                       ? \"Select team members...\"\n//                       : `${selectedAssignees.length} member${selectedAssignees.length > 1 ? 's' : ''} selected`}\n//                   </Button>\n//                 </PopoverTrigger>\n//                 <PopoverContent className=\"w-full p-0\" align=\"start\">\n//                   <Command>\n//                     <CommandInput placeholder=\"Search members...\" value={memberSearchQuery} onValueChange={setMemberSearchQuery} />\n//                     <CommandEmpty>No members found</CommandEmpty>\n//                     <CommandGroup className=\"max-h-64 overflow-auto\">\n//                       {availableMembers.map((m) => (\n//                         <CommandItem key={m.memberId} onSelect={() => toggleAssignee(m)}>\n//                           <Avatar className=\"h-8 w-8 mr-3\">\n//                             <AvatarFallback className=\"text-xs bg-teal-600 text-white\">\n//                               {getInitials(m.memberName)}\n//                             </AvatarFallback>\n//                           </Avatar>\n//                           <div>\n//                             <div className=\"font-medium\">{m.memberName}</div>\n//                             <div className=\"text-xs text-gray-500\">{m.role}</div>\n//                           </div>\n//                         </CommandItem>\n//                       ))}\n//                     </CommandGroup>\n//                   </Command>\n//                 </PopoverContent>\n//               </Popover>\n//               {errors.assignedTo && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><X className=\"h-3 w-3 mr-1\" /> {errors.assignedTo}</p>}\n//             </div>\n\n//             {/* Description */}\n//             <div className=\"w-full\">\n//               <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\n//                 <Info className=\"h-4 w-4 text-blue-500 mr-2\" /> Description <span className=\"text-red-500 ml-1\">*</span>\n//               </label>\n//               <Textarea\n//                 value={formData.description}\n//                 onChange={(e) => { setFormData(prev => ({ ...prev, description: e.target.value })); setHasUserInteracted(true); }}\n//                 className=\"w-full h-40 sm:h-48 md:h-52 bg-white border border-gray-300 rounded-lg text-sm resize-vertical focus:ring-2 focus:ring-blue-200 focus:border-blue-500 p-3\"\n//                 placeholder=\"Enter detailed task description...\"\n//               />\n//               <p className=\"text-xs text-muted-foreground mt-1\">{formData.description.length} characters</p>\n//               {errors.description && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><X className=\"h-3 w-3 mr-1\" /> {errors.description}</p>}\n//             </div>\n\n//             {taskError && (\n//               <div className=\"bg-red-50 border border-red-200 rounded-lg p-3\">\n//                 <p className=\"text-red-600 text-sm flex items-center\">\n//                   <X className=\"h-4 w-4 mr-2\" /> {taskError}\n//                 </p>\n//               </div>\n//             )}\n\n//             <div className=\"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200 mt-6\">\n//               <Button type=\"button\" variant=\"outline\" onClick={onClose}>\n//                 Cancel\n//               </Button>\n//               <Button\n//                 type=\"submit\"\n//                 disabled={!isSaveEnabled || taskStatus === \"loading\"}\n//                 className=\"bg-blue-600 hover:bg-blue-700 text-white\"\n//               >\n//                 {taskStatus === \"loading\" ? (\n//                   <>\n//                     <Loader className=\"mr-2 h-4 w-4 animate-spin\" />\n//                     Updating Task...\n//                   </>\n//                 ) : (\n//                   \"Update Task\"\n//                 )}\n//               </Button>\n//             </div>\n//           </form>\n//         </div>\n//       </DialogContent>\n//     </Dialog>\n//   );\n// };\n\n// export default EditTaskModal;\n\n\n\n\n\n\n\n\n\n\"use client\";\nimport { useState, useEffect, useMemo, useCallback, useRef } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { updateTask, fetchTaskById } from \"@/modules/project-management/task/slices/taskSlice\";\nimport { fetchTeamByProjectId } from \"@/modules/project-management/team/slices/teamSlice\";\nimport { Edit, User, Flag, CalendarIcon, Info, X, Loader } from \"lucide-react\";\nimport { toast } from \"sonner\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Button } from \"@/components/ui/button\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { Calendar } from \"@/components/ui/calendar\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogClose,\n} from \"@/components/ui/dialog\";\nimport {\n  Command,\n  CommandEmpty,\n  CommandGroup,\n  CommandInput,\n  CommandItem,\n} from \"@/components/ui/command\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { format } from \"date-fns\";\nimport { cn } from \"@/lib/utils\";\nimport { useCurrentUser } from \"@/hooks/useCurrentUser\";\n\nconst priorityConfig = {\n  Low: { color: \"bg-emerald-100 text-emerald-800\", badge: \"Low\" },\n  Medium: { color: \"bg-amber-100 text-amber-800\", badge: \"Medium\" },\n  High: { color: \"bg-rose-100 text-rose-800\", badge: \"High\" },\n};\n\nconst getInitials = (name = \"\") =>\n  name.trim().split(\" \").filter(Boolean).map(n => n[0]).join(\"\").toUpperCase().slice(0, 2);\n\nconst EditTaskModal = ({ taskId, isOpen, onClose, onTaskUpdated }) => {\n  const dispatch = useDispatch();\n  const { currentUser } = useCurrentUser();\n  const task = useSelector(state => state.task.currentTask);\n  const { teamsByProject: teams } = useSelector(state => state.team);\n  const { status: taskStatus, error: taskError } = useSelector(state => state.task);\n\n  const prevOpenRef = useRef(isOpen);\n\n  const [formData, setFormData] = useState({ title: \"\", description: \"\", priority: \"Medium\" });\n  const [selectedAssignees, setSelectedAssignees] = useState([]);\n  const [selectedTeam, setSelectedTeam] = useState(null);\n  const [selectedDateTime, setSelectedDateTime] = useState(null);\n  const [memberSearchQuery, setMemberSearchQuery] = useState(\"\");\n  const [memberOpen, setMemberOpen] = useState(false);\n  const [hasUserInteracted, setHasUserInteracted] = useState(false);\n  const [errors, setErrors] = useState({});\n\n  // Fetch task when modal opens\n  useEffect(() => {\n    const justOpened = isOpen && !prevOpenRef.current;\n    if (justOpened && taskId) {\n      dispatch(fetchTaskById(taskId));\n    }\n    prevOpenRef.current = isOpen;\n  }, [isOpen, taskId, dispatch]);\n\n  // Pre-fill form including team selection\n  useEffect(() => {\n    if (!task || !isOpen) {\n      setSelectedTeam(null);\n      setSelectedAssignees([]);\n      setSelectedDateTime(null);\n      setFormData({ title: \"\", description: \"\", priority: \"Medium\" });\n      return;\n    }\n\n    const deadlineDate = task.deadline ? new Date(task.deadline) : null;\n    setFormData({\n      title: task.title || \"\",\n      description: task.description || \"\",\n      priority: task.priority || \"Medium\",\n    });\n    setSelectedDateTime(deadlineDate);\n\n    // === CRITICAL: Find team using task.teamId OR task.assignedTeam?.teamId ===\n    const currentTaskTeamId = task.teamId || task.assignedTeam?.teamId;\n\n    if (currentTaskTeamId && teams.length > 0) {\n      const matchedTeam = teams.find(t => t.teamId === currentTaskTeamId);\n      setSelectedTeam(matchedTeam || null);\n    } else {\n      setSelectedTeam(null);\n    }\n\n    // Set assignees\n    const assignees = Array.isArray(task.assignedTo)\n      ? task.assignedTo.map(a => ({\n          memberId: a.memberId || a._id,\n          memberName: a.memberName || a.name || \"Unknown\",\n          role: a.role || \"Member\",\n        }))\n      : task.assignedToDetails\n      ? [{\n          memberId: task.assignedToDetails.memberId,\n          memberName: task.assignedToDetails.memberName || \"Unknown\",\n          role: task.assignedToDetails.role || \"Member\",\n        }]\n      : [];\n\n    setSelectedAssignees(assignees);\n    setMemberSearchQuery(\"\");\n    setHasUserInteracted(false);\n    setErrors({});\n  }, [task, teams, isOpen]);\n\n  // Fetch teams when projectId is known\n  useEffect(() => {\n    if (task?.projectId && isOpen) {\n      dispatch(fetchTeamByProjectId(task.projectId));\n    }\n  }, [task?.projectId, isOpen, dispatch]);\n\n  const handleTeamSelect = useCallback((value) => {\n    const team = teams.find(t => t.teamId === value);\n    setSelectedTeam(team || null);\n    setSelectedAssignees([]); // Clear assignees when team changes\n    setHasUserInteracted(true);\n  }, [teams]);\n\n  const availableMembers = useMemo(() => {\n    if (!selectedTeam?.teamMembers) return [];\n    const q = memberSearchQuery.toLowerCase();\n    return selectedTeam.teamMembers\n      .filter(m =>\n        m.memberName?.toLowerCase().includes(q) &&\n        !selectedAssignees.some(a => a.memberId === m.memberId)\n      )\n      .map(m => ({\n        memberId: m.memberId,\n        memberName: m.memberName,\n        role: m.role || \"Member\",\n      }));\n  }, [selectedTeam, memberSearchQuery, selectedAssignees]);\n\n  const toggleAssignee = useCallback((member) => {\n    setSelectedAssignees(prev => {\n      const exists = prev.some(a => a.memberId === member.memberId);\n      setHasUserInteracted(true);\n      return exists\n        ? prev.filter(a => a.memberId !== member.memberId)\n        : [...prev, member];\n    });\n  }, []);\n\n  const validate = useCallback(() => {\n    if (!hasUserInteracted) return true;\n    const newErrors = {};\n    if (!formData.title.trim()) newErrors.title = \"Title is required\";\n    if (!formData.description.trim()) newErrors.description = \"Description is required\";\n    if (!selectedDateTime) newErrors.deadline = \"Deadline is required\";\n    if (!selectedTeam) newErrors.team = \"Team selection is required\";\n    if (selectedAssignees.length === 0) newErrors.assignedTo = \"Assign at least one member\";\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  }, [formData, selectedDateTime, selectedTeam, selectedAssignees, hasUserInteracted]);\n\n  const handleSubmit = useCallback(async (e) => {\n    e.preventDefault();\n    setHasUserInteracted(true);\n    if (!validate()) {\n      toast.error(\"Please fill all required fields\");\n      return;\n    }\n\n    const deadlineISO = selectedDateTime ? selectedDateTime.toISOString() : null;\n    const payload = {\n      task_id: taskId,\n      title: formData.title.trim(),\n      description: formData.description.trim(),\n      priority: formData.priority,\n      deadline: deadlineISO,\n      teamId: selectedTeam.teamId,\n      assignedTo: selectedAssignees.map(m => ({\n        memberId: m.memberId,\n        memberName: m.memberName,\n        role: m.role,\n      })),\n      actionedBy: {\n        note: \"Task Updated!\",\n        performedBy: currentUser?.name || currentUser?.email || \"Unknown User\",\n        timestamp: new Date().toISOString(),\n      },\n    };\n\n    try {\n      await dispatch(updateTask(payload)).unwrap();\n      toast.success(\"Task updated successfully!\");\n      onTaskUpdated?.();\n      onClose();\n    } catch (err) {\n      toast.error(taskError || \"Failed to update task\");\n    }\n  }, [validate, formData, selectedDateTime, selectedTeam, selectedAssignees, taskId, currentUser, dispatch, taskError, onTaskUpdated, onClose]);\n\n  const displayDateTime = selectedDateTime\n    ? format(selectedDateTime, \"MMM dd, yyyy 'at' HH:mm\")\n    : \"Select date & time\";\n\n  const isSaveEnabled = formData.title.trim() && formData.description.trim() && selectedDateTime && selectedTeam && selectedAssignees.length > 0;\n\n  if (!isOpen) return null;\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"w-full max-w-full h-[100vh] max-h-[100vh] sm:max-w-6xl sm:max-h-[85vh] bg-white shadow-lg border border-gray-200 rounded-lg text-black p-2\">\n        <DialogHeader className=\"bg-gradient-to-r from-blue-50 to-indigo-50 px-4 py-2 border-b border-gray-200 sticky top-0 z-10\">\n          <div className=\"flex justify-between items-center\">\n            <DialogTitle className=\"text-base sm:text-lg font-bold text-gray-800 flex items-center\">\n              <Edit className=\"mr-2 h-4 w-4 text-blue-500\" />\n              Edit Task\n            </DialogTitle>\n            <DialogClose asChild>\n              <Button variant=\"ghost\" size=\"icon\" className=\"text-gray-500 hover:bg-gray-100 rounded-full h-7 w-7\">\n                <X className=\"h-3 w-3\" />\n              </Button>\n            </DialogClose>\n          </div>\n        </DialogHeader>\n\n        <div className=\"p-4 sm:p-6 overflow-y-auto max-h-[calc(85vh-60px)]\">\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            {/* Title */}\n            <div className=\"w-full\">\n              <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\n                <Edit className=\"h-4 w-4 text-blue-500 mr-2\" /> Title <span className=\"text-red-500 ml-1\">*</span>\n              </label>\n              <Textarea\n                value={formData.title}\n                onChange={(e) => setFormData(prev => ({ ...prev, title: e.target.value.slice(0, 150) }))}\n                className=\"w-full bg-white border border-gray-300 rounded-lg text-sm resize-none focus:ring-2 focus:ring-blue-200 focus:border-blue-500 p-3\"\n                placeholder=\"Enter task title...\"\n              />\n              <p className=\"text-xs text-muted-foreground mt-1\">{formData.title.length} / 150 characters</p>\n              {errors.title && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><X className=\"h-3 w-3 mr-1\" /> {errors.title}</p>}\n            </div>\n\n            {/* Priority & Deadline */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n              <div>\n                <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\n                  <Flag className=\"h-4 w-4 text-blue-500 mr-2\" /> Priority\n                </label>\n                <Select value={formData.priority} onValueChange={(v) => { setFormData(prev => ({ ...prev, priority: v })); setHasUserInteracted(true); }}>\n                  <SelectTrigger className=\"w-full h-10\">\n                    <SelectValue>\n                      <span className={cn(\"px-2 py-1 rounded-full text-xs font-medium\", priorityConfig[formData.priority]?.color)}>\n                        {priorityConfig[formData.priority]?.badge}\n                      </span>\n                    </SelectValue>\n                  </SelectTrigger>\n                  <SelectContent>\n                    {Object.entries(priorityConfig).map(([key, config]) => (\n                      <SelectItem key={key} value={key}>\n                        <span className={cn(\"px-2 py-1 rounded-full text-xs font-medium\", config.color)}>\n                          {config.badge}\n                        </span>\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div>\n                <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\n                  <CalendarIcon className=\"h-4 w-4 text-blue-500 mr-2\" /> Deadline <span className=\"text-red-500 ml-1\">*</span>\n                </label>\n                <Popover>\n                  <PopoverTrigger asChild>\n                    <Button variant=\"outline\" className={cn(\"w-full justify-between h-10 text-sm\", !selectedDateTime && \"text-gray-500\")}>\n                      {displayDateTime}\n                    </Button>\n                  </PopoverTrigger>\n                  <PopoverContent className=\"w-auto p-0 bg-white border border-gray-200 rounded-lg shadow-lg\">\n                    <Calendar mode=\"single\" selected={selectedDateTime} onSelect={(date) => { setSelectedDateTime(date); setHasUserInteracted(true); }} initialFocus className=\"rounded-lg\" />\n                    <div className=\"p-3 border-t flex items-center gap-2\">\n                      <input\n                        type=\"time\"\n                        value={selectedDateTime ? format(selectedDateTime, \"HH:mm\") : \"\"}\n                        onChange={(e) => {\n                          if (selectedDateTime) {\n                            const [h, m] = e.target.value.split(\":\");\n                            const newDt = new Date(selectedDateTime);\n                            newDt.setHours(parseInt(h), parseInt(m));\n                            setSelectedDateTime(newDt);\n                            setHasUserInteracted(true);\n                          }\n                        }}\n                        className=\"h-10 border rounded px-3 text-sm w-full\"\n                      />\n                    </div>\n                  </PopoverContent>\n                </Popover>\n                {errors.deadline && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><X className=\"h-3 w-3 mr-1\" /> {errors.deadline}</p>}\n              </div>\n            </div>\n\n            {/* Team - Now correctly pre-selected and shows team name */}\n            <div>\n              <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\n                <User className=\"h-4 w-4 text-blue-500 mr-2\" /> Team <span className=\"text-red-500 ml-1\">*</span>\n              </label>\n              <Select value={selectedTeam?.teamId || \"\"} onValueChange={handleTeamSelect}>\n                <SelectTrigger className=\"w-full h-10\">\n                  <SelectValue placeholder=\"Select a team\">\n                    {selectedTeam ? selectedTeam.teamName : \"Select a team\"}\n                  </SelectValue>\n                </SelectTrigger>\n                <SelectContent>\n                  {teams.map((team) => (\n                    <SelectItem key={team.teamId} value={team.teamId}>\n                      {team.teamName}\n                    </SelectItem>\n                  ))}\n                </SelectContent>\n              </Select>\n              {errors.team && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><X className=\"h-3 w-3 mr-1\" /> {errors.team}</p>}\n            </div>\n\n            {/* Assign To */}\n            <div>\n              <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\n                <User className=\"h-4 w-4 text-blue-500 mr-2\" /> Assign To <span className=\"text-red-500 ml-1\">*</span>\n              </label>\n              <div className=\"flex flex-wrap gap-3 items-center mb-3\">\n                {selectedAssignees.map((person) => (\n                  <div key={person.memberId} className=\"relative group\">\n                    <Avatar className=\"h-10 w-10 ring-4 ring-white border-2 border-white cursor-pointer hover:scale-110 transition\">\n                      <AvatarFallback className=\"bg-teal-600 text-white text-sm font-bold\">\n                        {getInitials(person.memberName)}\n                      </AvatarFallback>\n                    </Avatar>\n                    <button\n                      type=\"button\"\n                      onClick={() => toggleAssignee(person)}\n                      className=\"absolute -top-1 -right-1 bg-red-600 text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition\"\n                    >\n                      <X className=\"h-3 w-3\" />\n                    </button>\n                  </div>\n                ))}\n              </div>\n              <Popover open={memberOpen} onOpenChange={setMemberOpen}>\n                <PopoverTrigger asChild>\n                  <Button variant=\"outline\" disabled={!selectedTeam} className=\"w-full h-12 justify-between text-sm\">\n                    {selectedAssignees.length === 0\n                      ? \"Select team members...\"\n                      : `${selectedAssignees.length} member${selectedAssignees.length > 1 ? 's' : ''} selected`}\n                  </Button>\n                </PopoverTrigger>\n                <PopoverContent className=\"w-full p-0\" align=\"start\">\n                  <Command>\n                    <CommandInput placeholder=\"Search members...\" value={memberSearchQuery} onValueChange={setMemberSearchQuery} />\n                    <CommandEmpty>No members found</CommandEmpty>\n                    <CommandGroup className=\"max-h-64 overflow-auto\">\n                      {availableMembers.map((m) => (\n                        <CommandItem key={m.memberId} onSelect={() => toggleAssignee(m)}>\n                          <Avatar className=\"h-8 w-8 mr-3\">\n                            <AvatarFallback className=\"text-xs bg-teal-600 text-white\">\n                              {getInitials(m.memberName)}\n                            </AvatarFallback>\n                          </Avatar>\n                          <div>\n                            <div className=\"font-medium\">{m.memberName}</div>\n                            <div className=\"text-xs text-gray-500\">{m.role}</div>\n                          </div>\n                        </CommandItem>\n                      ))}\n                    </CommandGroup>\n                  </Command>\n                </PopoverContent>\n              </Popover>\n              {errors.assignedTo && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><X className=\"h-3 w-3 mr-1\" /> {errors.assignedTo}</p>}\n            </div>\n\n            {/* Description */}\n            <div className=\"w-full\">\n              <label className=\"flex items-center text-sm font-medium text-gray-700 mb-2\">\n                <Info className=\"h-4 w-4 text-blue-500 mr-2\" /> Description <span className=\"text-red-500 ml-1\">*</span>\n              </label>\n              <Textarea\n                value={formData.description}\n                onChange={(e) => { setFormData(prev => ({ ...prev, description: e.target.value })); setHasUserInteracted(true); }}\n                className=\"w-full h-40 sm:h-48 md:h-52 bg-white border border-gray-300 rounded-lg text-sm resize-vertical focus:ring-2 focus:ring-blue-200 focus:border-blue-500 p-3\"\n                placeholder=\"Enter detailed task description...\"\n              />\n              <p className=\"text-xs text-muted-foreground mt-1\">{formData.description.length} characters</p>\n              {errors.description && <p className=\"text-red-500 text-xs mt-1 flex items-center\"><X className=\"h-3 w-3 mr-1\" /> {errors.description}</p>}\n            </div>\n\n            {taskError && (\n              <div className=\"bg-red-50 border border-red-200 rounded-lg p-3\">\n                <p className=\"text-red-600 text-sm flex items-center\">\n                  <X className=\"h-4 w-4 mr-2\" /> {taskError}\n                </p>\n              </div>\n            )}\n\n            <div className=\"flex flex-col sm:flex-row justify-end gap-3 pt-4 border-t border-gray-200 mt-6\">\n              <Button type=\"button\" variant=\"outline\" onClick={onClose}>\n                Cancel\n              </Button>\n              <Button\n                type=\"submit\"\n                disabled={!isSaveEnabled || taskStatus === \"loading\"}\n                className=\"bg-blue-600 hover:bg-blue-700 text-white\"\n              >\n                {taskStatus === \"loading\" ? (\n                  <>\n                    <Loader className=\"mr-2 h-4 w-4 animate-spin\" />\n                    Updating Task...\n                  </>\n                ) : (\n                  \"Update Task\"\n                )}\n              </Button>\n            </div>\n          </form>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default EditTaskModal;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 2947, "column": 0}, "map": {"version":3,"sources":["file:///C:/Dev%20Directory/Testing/frontend/Testing_Bluprint_Frontend/src/modules/project-management/task/components/AllTaskListByProjectId.jsx"],"sourcesContent":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\"use client\";\n\nimport { format } from \"date-fns\";\nimport { useEffect, useState, useMemo } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useRouter } from \"next/navigation\";\nimport {\n  fetchTasksByProjectId,\n  deleteTask,\n  downloadTasksReport,\n  selectTasksByProjectId,\n  selectTaskStatus,\n  selectEmployeeProjectTasks,\n  fetchEmployeeProjectTasks,\n} from \"@/modules/project-management/task/slices/taskSlice\";\nimport {\n  MoreVertical,\n  CalendarIcon,\n  Filter,\n  Eye,\n  Edit,\n  Trash2,\n  Download,\n  Plus,\n  Search,\n  AlertCircle,\n  X,\n} from \"lucide-react\";\nimport { toast } from \"sonner\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport { Button } from \"@/components/ui/button\";\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { Calendar } from \"@/components/ui/calendar\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\";\nimport { cn } from \"@/lib/utils\";\nimport { formatDateTimeIST } from \"@/utils/formatDate\";\nimport CreateTaskModal from \"./CreateTaskModal\";\nimport EditTaskModal from \"./EditTaskModal\";\nimport { useCurrentUser } from \"@/hooks/useCurrentUser\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\n\nconst AllTaskListByProjectId = ({ projectId, project }) => {\n  const { currentUser, isTeamLead } = useCurrentUser(project?.teamLeadId);\n  const dispatch = useDispatch();\n  const router = useRouter();\n\n  const [showDeleteModal, setShowDeleteModal] = useState(false);\n  const [taskIdToDelete, setTaskIdToDelete] = useState(null);\n  const [showLoader, setShowLoader] = useState(true);\n  const [showCreateTaskModal, setShowCreateTaskModal] = useState(false);\n  const [showEditModal, setShowEditModal] = useState(false);\n  const [editingTaskId, setEditingTaskId] = useState(null);\n  const [showFilterDialog, setShowFilterDialog] = useState(false);\n\n  const isCpc = currentUser?.role === \"cpc\";\n  const isTeamLeadOrCpc = isCpc || isTeamLead;\n  const [viewMode, setViewMode] = useState(isTeamLeadOrCpc ? \"all\" : \"my\");\n\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [tempPriorityFilter, setTempPriorityFilter] = useState(\"all\");\n  const [tempStatusFilter, setTempStatusFilter] = useState(\"all\");\n  const [tempAssignedToFilter, setTempAssignedToFilter] = useState(\"all\");\n  const [tempDateFrom, setTempDateFrom] = useState(null);\n  const [tempDateTo, setTempDateTo] = useState(null);\n  const [priorityFilter, setPriorityFilter] = useState(\"all\");\n  const [statusFilter, setStatusFilter] = useState(\"all\");\n  const [assignedToFilter, setAssignedToFilter] = useState(\"all\");\n  const [dateFrom, setDateFrom] = useState(null);\n  const [dateTo, setDateTo] = useState(null);\n  const [sortConfig, setSortConfig] = useState({ key: \"\", direction: \"asc\" });\n  const [currentPage, setCurrentPage] = useState(1);\n  const tasksPerPage = 10;\n\n  useEffect(() => {\n    if (projectId) {\n      setShowLoader(true);\n      dispatch(fetchTasksByProjectId(projectId))\n        .unwrap()\n        .finally(() => setShowLoader(false));\n    }\n  }, [dispatch, projectId]);\n\n  const employeeId = currentUser?.id;\n  const tasksFromStore = useSelector((state) => selectTasksByProjectId(state, projectId));\n  const status = useSelector(selectTaskStatus);\n  const employeeProjectTasks = useSelector((state) =>\n    selectEmployeeProjectTasks(state, projectId, employeeId)\n  );\n\n  useEffect(() => {\n    if (projectId && employeeId && (!isTeamLeadOrCpc || viewMode === \"my\")) {\n      setShowLoader(true);\n      dispatch(fetchEmployeeProjectTasks({ projectId, employeeId }))\n        .unwrap()\n        .finally(() => setShowLoader(false));\n    }\n  }, [dispatch, projectId, employeeId, isTeamLeadOrCpc, viewMode]);\n\n  const tasks = useMemo(() => {\n    return (!isTeamLeadOrCpc || viewMode === \"my\") ? employeeProjectTasks || [] : tasksFromStore || [];\n  }, [isTeamLeadOrCpc, viewMode, tasksFromStore, employeeProjectTasks]);\n\n  const showAllViewOption = isTeamLeadOrCpc;\n  const showAssignedFilter = showAllViewOption && viewMode === \"all\";\n\n  const refreshTasks = () => {\n    dispatch(fetchTasksByProjectId(projectId));\n    if (!isTeamLeadOrCpc || viewMode === \"my\") {\n      dispatch(fetchEmployeeProjectTasks({ projectId, employeeId }));\n    }\n  };\n\n  const handleDeleteTask = async () => {\n    try {\n      await dispatch(deleteTask(taskIdToDelete)).unwrap();\n      toast.success(\"Task deleted successfully!\");\n      refreshTasks();\n    } catch (err) {\n      toast.error(\"Failed to delete task.\");\n    }\n    setShowDeleteModal(false);\n    setTaskIdToDelete(null);\n  };\n\n  const handleSort = (key) => {\n    setSortConfig((prev) => ({\n      key,\n      direction: prev.key === key && prev.direction === \"asc\" ? \"desc\" : \"asc\",\n    }));\n    setCurrentPage(1);\n  };\n\n  const handleViewModeChange = (newMode) => {\n    setViewMode(newMode);\n    setCurrentPage(1);\n    handleResetFilters();\n  };\n\n  const assignedMembers = useMemo(() => {\n    return Array.from(new Set(tasks.flatMap(t => t.assignedTo?.map(a => a.memberName) || []))).filter(Boolean);\n  }, [tasks]);\n\n  const filteredTasks = useMemo(() => {\n    let filtered = [...tasks];\n\n    if (searchQuery.trim()) {\n      const q = searchQuery.toLowerCase();\n      filtered = filtered.filter(t =>\n        t.title?.toLowerCase().includes(q) ||\n        t.task_id?.toLowerCase().includes(q) ||\n        t.assignedTo?.some(a => a.memberName?.toLowerCase().includes(q))\n      );\n    }\n\n    if (priorityFilter !== \"all\") filtered = filtered.filter(t => t.priority === priorityFilter);\n    if (statusFilter !== \"all\") filtered = filtered.filter(t => t.status === statusFilter);\n    if (assignedToFilter !== \"all\" && showAssignedFilter) {\n      filtered = filtered.filter(t => t.assignedTo?.some(a => a.memberName === assignedToFilter));\n    }\n    if (dateFrom || dateTo) {\n      filtered = filtered.filter(t => {\n        if (!t.deadline) return false;\n        const d = new Date(t.deadline);\n        return (!dateFrom || d >= dateFrom) && (!dateTo || d <= dateTo);\n      });\n    }\n\n    if (sortConfig.key) {\n      filtered.sort((a, b) => {\n        let aVal = sortConfig.key.includes(\".\") ? sortConfig.key.split(\".\").reduce((o, k) => o?.[k], a) : a[sortConfig.key];\n        let bVal = sortConfig.key.includes(\".\") ? sortConfig.key.split(\".\").reduce((o, k) => o?.[k], b) : b[sortConfig.key];\n        if (typeof aVal === \"string\") aVal = aVal.toLowerCase();\n        if (typeof bVal === \"string\") bVal = bVal.toLowerCase();\n        return (aVal < bVal ? -1 : 1) * (sortConfig.direction === \"asc\" ? 1 : -1);\n      });\n    }\n\n    return filtered;\n  }, [tasks, searchQuery, priorityFilter, statusFilter, assignedToFilter, dateFrom, dateTo, sortConfig, showAssignedFilter]);\n\n  const handleResetFilters = () => {\n    setSearchQuery(\"\");\n    setPriorityFilter(\"all\");\n    setStatusFilter(\"all\");\n    setAssignedToFilter(\"all\");\n    setDateFrom(null);\n    setDateTo(null);\n    setTempPriorityFilter(\"all\");\n    setTempStatusFilter(\"all\");\n    setTempAssignedToFilter(\"all\");\n    setTempDateFrom(null);\n    setTempDateTo(null);\n    setSortConfig({ key: \"\", direction: \"asc\" });\n    setCurrentPage(1);\n  };\n\n  const handleApplyFilters = () => {\n    setPriorityFilter(tempPriorityFilter);\n    setStatusFilter(tempStatusFilter);\n    setAssignedToFilter(tempAssignedToFilter);\n    setDateFrom(tempDateFrom);\n    setDateTo(tempDateTo);\n    setShowFilterDialog(false);\n    setCurrentPage(1);\n  };\n\n  const totalPages = Math.max(1, Math.ceil(filteredTasks.length / tasksPerPage));\n  const paginatedTasks = filteredTasks.slice((currentPage - 1) * tasksPerPage, currentPage * tasksPerPage);\n\n  const getInitials = (name) => {\n    if (!name) return \"NA\";\n    const words = name.split(\" \");\n    return words.length > 1 ? `${words[0][0]}${words[1][0]}`.toUpperCase() : name.slice(0, 2).toUpperCase();\n  };\n\n  const truncateTitle = (title) => title?.length > 70 ? `${title.slice(0, 70)}...` : title || \"N/A\";\n\n  return (\n    <TooltipProvider>\n      <div className=\"w-full bg-white\">\n        <div className=\"space-y-2\">\n\n          <div className=\"flex flex-wrap gap-4\">\n            <div className=\"flex-1 min-w-[180px]\">\n              <div className=\"relative\">\n                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4\" />\n                <Input\n                  placeholder=\"Search tasks...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"pl-10\"\n                />\n              </div>\n            </div>\n\n            {showAllViewOption && (\n              <Select value={viewMode} onValueChange={handleViewModeChange}>\n                <SelectTrigger className=\"w-[140px]\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"my\">My Tasks</SelectItem>\n                  <SelectItem value=\"all\">All Tasks</SelectItem>\n                </SelectContent>\n              </Select>\n            )}\n\n            <Button variant=\"outline\" onClick={() => setShowFilterDialog(true)}>\n              <Filter className=\"w-4 h-4 mr-2\" /> Filter\n            </Button>\n            <Button variant=\"outline\" onClick={handleResetFilters}>\n              <X className=\"w-4 h-4 mr-2\" /> Reset\n            </Button>\n\n            {isTeamLeadOrCpc && (\n              <>\n                <Button variant=\"default\" onClick={() => dispatch(downloadTasksReport({ projectId }))}>\n                  <Download className=\"w-4 h-4 mr-2\" /> Download\n                </Button>\n                <Button variant=\"default\" onClick={() => setShowCreateTaskModal(true)}>\n                  <Plus className=\"w-4 h-4 mr-2\" /> Create Task\n                </Button>\n              </>\n            )}\n          </div>\n\n          <div className=\"border rounded-lg overflow-hidden\">\n            <Table>\n              <TableHeader>\n                <TableRow className=\"bg-gray-50\">\n                  <TableHead className=\"w-16\">S.N</TableHead>\n                  <TableHead onClick={() => handleSort(\"title\")} className=\"cursor-pointer\">Title</TableHead>\n                  <TableHead>Assignee</TableHead>\n                  <TableHead onClick={() => handleSort(\"priority\")} className=\"cursor-pointer\">Priority</TableHead>\n                  <TableHead onClick={() => handleSort(\"deadline\")} className=\"cursor-pointer\">Deadline</TableHead>\n                  <TableHead onClick={() => handleSort(\"status\")} className=\"cursor-pointer\">Status</TableHead>\n                  <TableHead className=\"w-20\">Action</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {showLoader ? (\n                  <TableRow><TableCell colSpan={7} className=\"text-center py-10\">Loading...</TableCell></TableRow>\n                ) : paginatedTasks.length === 0 ? (\n                  <TableRow><TableCell colSpan={7} className=\"text-center py-10 text-gray-500\">No tasks found</TableCell></TableRow>\n                ) : (\n                  paginatedTasks.map((task, idx) => (\n                    <TableRow key={task._id} className=\"hover:bg-gray-50 cursor-pointer\" onClick={() => router.push(`/workspace/task/${task.task_id}`)}>\n                      <TableCell>{(currentPage - 1) * tasksPerPage + idx + 1}</TableCell>\n                      <TableCell className=\"font-medium\">{truncateTitle(task.title)}</TableCell>\n\n                      <TableCell>\n                        {task.assignedTo?.length > 0 ? (\n                          <div className=\"flex -space-x-2\">\n                            {task.assignedTo.slice(0, 3).map((a) => (\n                              <Tooltip key={a.memberId || a._id}>\n                                <TooltipTrigger asChild>\n                                  <Avatar className=\"w-8 h-8 ring-2 ring-white\">\n                                    <AvatarFallback className=\"bg-teal-600 text-white text-xs\">\n                                      {getInitials(a.memberName)}\n                                    </AvatarFallback>\n                                  </Avatar>\n                                </TooltipTrigger>\n                                <TooltipContent>{a.memberName}</TooltipContent>\n                              </Tooltip>\n                            ))}\n                            {task.assignedTo.length > 3 && (\n                              <div className=\"w-8 h-8 rounded-full bg-gray-300 text-xs flex items-center justify-center ring-2 ring-white\">\n                                +{task.assignedTo.length - 3}\n                              </div>\n                            )}\n                          </div>\n                        ) : \"—\"}\n                      </TableCell>\n\n                      <TableCell>\n                        <span className={cn(\n                          \"px-2.5 py-0.5 rounded-full text-xs font-medium\",\n                          task.priority === \"Low\" && \"bg-green-100 text-green-800\",\n                          task.priority === \"Medium\" && \"bg-yellow-100 text-yellow-800\",\n                          task.priority === \"High\" && \"bg-red-100 text-red-800\"\n                        )}>\n                          {task.priority}\n                        </span>\n                      </TableCell>\n\n                      <TableCell className=\"text-xs\">\n                        {formatDateTimeIST(task.deadline) || \"—\"}\n                      </TableCell>\n\n                      <TableCell>\n                        <span className={cn(\n                          \"px-2.5 py-0.5 rounded-full text-xs font-medium\",\n                          task.status === \"Pending\" && \"bg-yellow-100 text-yellow-800\",\n                          task.status === \"In Progress\" && \"bg-blue-100 text-blue-800\",\n                          task.status === \"Completed\" && \"bg-green-100 text-green-800\"\n                        )}>\n                          {task.status}\n                        </span>\n                      </TableCell>\n\n                      <TableCell onClick={(e) => e.stopPropagation()}>\n                        <DropdownMenu>\n                          <DropdownMenuTrigger asChild>\n                            <Button variant=\"ghost\" size=\"icon\"><MoreVertical className=\"h-4 w-4\" /></Button>\n                          </DropdownMenuTrigger>\n                          <DropdownMenuContent align=\"end\">\n                            <DropdownMenuItem onClick={() => router.push(`/workspace/task/${task.task_id}`)}>\n                              <Eye className=\"w-4 h-4 mr-2\" /> View\n                            </DropdownMenuItem>\n                            {isTeamLeadOrCpc && viewMode === \"all\" && (\n                              <>\n                                <DropdownMenuItem onClick={() => { setEditingTaskId(task.task_id); setShowEditModal(true); }}>\n                                  <Edit className=\"w-4 h-4 mr-2\" /> Edit\n                                </DropdownMenuItem>\n                                <DropdownMenuItem onClick={() => { setTaskIdToDelete(task.task_id); setShowDeleteModal(true); }} className=\"text-red-600\">\n                                  <Trash2 className=\"w-4 h-4 mr-2\" /> Delete\n                                </DropdownMenuItem>\n                              </>\n                            )}\n                          </DropdownMenuContent>\n                        </DropdownMenu>\n                      </TableCell>\n                    </TableRow>\n                  ))\n                )}\n              </TableBody>\n            </Table>\n          </div>\n\n          {totalPages > 1 && (\n            <div className=\"flex justify-center gap-2\">\n              <Button variant=\"outline\" size=\"sm\" disabled={currentPage === 1} onClick={() => setCurrentPage(p => p - 1)}>Previous</Button>\n              {Array.from({ length: Math.min(7, totalPages) }, (_, i) => {\n                const page = i + 1;\n                return (\n                  <Button key={page} variant={currentPage === page ? \"default\" : \"outline\"} size=\"sm\" onClick={() => setCurrentPage(page)}>\n                    {page}\n                  </Button>\n                );\n              })}\n              <Button variant=\"outline\" size=\"sm\" disabled={currentPage === totalPages} onClick={() => setCurrentPage(p => p + 1)}>Next</Button>\n            </div>\n          )}\n\n          <Dialog open={showDeleteModal} onOpenChange={setShowDeleteModal}>\n            <DialogContent>\n              <DialogHeader>\n                <DialogTitle className=\"flex items-center gap-2\">\n                  <AlertCircle className=\"w-5 h-5 text-red-600\" /> Delete Task\n                </DialogTitle>\n              </DialogHeader>\n              <p>Are you sure you want to delete this task? This action cannot be undone.</p>\n              <div className=\"flex justify-end gap-3 mt-4\">\n                <Button variant=\"outline\" onClick={() => setShowDeleteModal(false)}>Cancel</Button>\n                <Button variant=\"destructive\" onClick={handleDeleteTask}>Delete</Button>\n              </div>\n            </DialogContent>\n          </Dialog>\n\n          {isTeamLeadOrCpc && (\n            <CreateTaskModal\n              onTaskAssingn={refreshTasks}\n              projectId={projectId}\n              project={project}\n              isOpen={showCreateTaskModal}\n              onClose={() => setShowCreateTaskModal(false)}\n            />\n          )}\n\n          {isTeamLeadOrCpc && (\n            <EditTaskModal\n              taskId={editingTaskId}\n              isOpen={showEditModal}\n              onClose={() => { setShowEditModal(false); setEditingTaskId(null); }}\n              onTaskUpdated={refreshTasks}\n            />\n          )}\n        </div>\n      </div>\n    </TooltipProvider>\n  );\n};\n\nexport default AllTaskListByProjectId;"],"names":[],"mappings":"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","debugId":null}}]
}